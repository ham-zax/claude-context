<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Satori — Agent-Safe Code Retrieval via MCP</title>
  <meta name="description"
    content="Give your AI agent exact, structurally-aware access to your codebase. Ask in natural language, get back symbols, call graphs, and exact file spans. Free tier. Any MCP agent." />
  <meta property="og:title" content="Satori | Your agent finally knows your codebase" />
  <meta property="og:description" content="Semantic retrieval purpose-built for code. Index once. Ask forever." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Satori | Your agent finally knows your codebase" />
  <meta name="twitter:description" content="Ask your codebase a question. Get back the exact symbol." />
  <link rel="preconnect" href="https://fonts.googleapis.com" media="(min-width: 861px)" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin media="(min-width: 861px)" />
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@100;400;700&display=swap"
    rel="stylesheet" media="(min-width: 861px)" />
  <style>
    :root {
      --bg: #000000;
      --panel: rgba(10, 10, 10, 0.85);
      --fg: #ffffff;
      --muted: rgba(255, 255, 255, 0.55);
      --line: rgba(255, 255, 255, 0.15);
      --accent: #dfff00;
      /* Radioactive Chartreuse */
      --accent-dim: rgba(223, 255, 0, 0.15);
      --serif: "Cormorant Garamond", serif;
      --sans: "Inter", sans-serif;
      --mono: "JetBrains Mono", monospace;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      cursor: crosshair;
    }

    body {
      min-height: 100vh;
      color: var(--fg);
      font-family: var(--sans);
      background-color: var(--bg);
      background-image:
        linear-gradient(var(--line) 1px, transparent 1px),
        linear-gradient(90deg, var(--line) 1px, transparent 1px);
      background-size: 50px 50px;
      background-position: center center;
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
    }

    ::selection {
      background: var(--accent);
      color: #060607;
    }

    /* Subliminal Gojo Background Motif */
    .gojo-subliminal-bg {
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120vw;
      max-width: 1400px;
      height: auto;
      z-index: 0;
      pointer-events: none;
      /* TEMPORARILY BOOSTED FOR VERIFICATION */
      opacity: 0.8;
    }

    .canvas-wrap {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.2;
      z-index: 0;
    }

    #vector-canvas {
      width: 100%;
      height: 100%;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1080px;
      margin: 0 auto;
      padding: 1rem 1rem 4rem;
    }

    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
      border: 1px solid var(--line);
      padding: 1.2rem 1.5rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      font-size: 0.75rem;
      font-family: var(--mono);
      background: var(--bg);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 1rem;
      z-index: 100;
    }

    .nav-brand {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--accent);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.6;
        transform: scale(0.9);
      }
    }

    .nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
    }

    a {
      color: var(--fg);
      text-decoration: none;
    }

    a:hover {
      color: var(--accent);
    }

    .hero {
      margin-top: 2rem;
      border: 1px solid var(--line);
      padding: 5rem 2rem;
      background: transparent;
      /* allow the gojo svg to show through */
      backdrop-filter: blur(8px);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      transition: border-color 0.3s;
    }

    .hero:hover {
      border-color: var(--accent);
      box-shadow: 0 0 40px var(--accent-dim);
    }

    .hero h1 {
      font-family: var(--serif);
      font-size: clamp(4rem, 12vw, 9rem);
      line-height: 0.8;
      font-weight: 300;
      letter-spacing: -0.04em;
      transition:
        color 0.2s,
        text-shadow 0.2s;
    }

    .hero h1:hover {
      color: var(--accent);
      text-shadow: 0 0 60px var(--accent-dim);
    }

    .hero h2 {
      margin-top: 1.5rem;
      font-family: var(--sans);
      font-size: clamp(1.2rem, 3vw, 1.8rem);
      font-weight: 300;
      max-width: 800px;
    }

    .hero p {
      margin-top: 1rem;
      color: var(--muted);
      max-width: 700px;
      font-weight: 300;
      font-size: 1.1rem;
    }

    .hero-meta {
      margin-top: 2rem;
      font-family: var(--mono);
      font-size: 0.75rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }

    .install-strip {
      margin-top: 1rem;
      border: 1px solid var(--line);
      background: transparent;
      /* allow the gojo svg to show through */
      backdrop-filter: blur(8px);
      padding: 3rem 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      position: relative;
    }

    .install-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
      border-bottom: 1px dotted var(--line);
      padding-bottom: 1rem;
    }

    .install-title {
      font-family: var(--mono);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent);
    }

    .install-note {
      font-family: var(--sans);
      color: var(--muted);
      font-size: 1rem;
      font-weight: 300;
    }

    .config-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
    }

    .config-card {
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.01);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      transition: border-color 0.2s;
    }

    .config-card:hover {
      border-color: rgba(223, 255, 0, 0.4);
    }

    .config-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    code {
      font-family: var(--mono);
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--fg);
    }

    pre {
      margin: 0;
      border: 1px solid var(--line);
      background: rgba(0, 0, 0, 0.6);
      padding: 1rem;
      overflow-x: auto;
      font-size: 0.8rem;
      line-height: 1.6;
      white-space: pre;
      color: var(--muted);
    }

    pre::-webkit-scrollbar {
      height: 4px;
    }

    pre::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
    }

    .btn {
      border: 1px solid var(--fg);
      background: transparent;
      color: var(--fg);
      font-family: var(--mono);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      padding: 0.6rem 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      background: var(--accent);
      color: var(--bg);
      border-color: var(--accent);
      box-shadow: 0 0 20px var(--accent-dim);
      font-weight: 700;
    }

    .section {
      margin-top: 1rem;
      border: 1px solid var(--line);
      background: transparent;
      /* allow the gojo svg to show through */
      backdrop-filter: blur(8px);
      padding: 4rem 2rem;
      position: relative;
      transition: border-left-color 0.3s;
    }

    .section:hover {
      border-left: 2px solid var(--accent);
    }

    .section h3 {
      font-family: var(--serif);
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 300;
      line-height: 0.95;
      margin-bottom: 1rem;
    }

    .section-intro {
      font-family: var(--sans);
      font-size: 1.1rem;
      font-weight: 300;
      color: var(--muted);
      max-width: 800px;
      margin-bottom: 2.5rem;
    }

    .sel {
      display: inline-block;
      padding: 0.02rem 0.24rem;
      margin: 0 0.06rem;
      border-radius: 0.14rem;
      line-height: 1.35;
    }

    .sel-risk {
      background: rgba(255, 140, 107, 0.22);
      color: #ffc5b5;
    }

    .sel-core {
      background: rgba(105, 216, 255, 0.22);
      color: #bdefff;
    }

    .sel-flow {
      background: rgba(223, 255, 0, 0.22);
      color: #eaff9b;
    }

    .sel-trust {
      background: rgba(180, 142, 255, 0.24);
      color: #d8beff;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
    }

    .card {
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.01);
      padding: 2rem;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      border-color: var(--accent);
      background: rgba(223, 255, 0, 0.02);
      transform: translateY(-2px);
    }

    .card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 1px;
      background: var(--accent);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
    }

    .card:hover::before {
      transform: scaleX(1);
    }

    .card h4 {
      font-family: var(--mono);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .card p {
      font-family: var(--sans);
      color: var(--muted);
      font-size: 0.95rem;
      font-weight: 300;
      line-height: 1.6;
    }

    .steps {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .step {
      border-left: 2px solid var(--line);
      padding-left: 1.5rem;
      position: relative;
      transition: border-color 0.2s;
    }

    .step:hover {
      border-left-color: var(--accent);
    }

    .step strong {
      display: block;
      font-family: var(--mono);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent);
      margin-bottom: 0.5rem;
    }

    .step code {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.8rem;
      white-space: pre-wrap;
      background: rgba(0, 0, 0, 0.4);
      padding: 0.75rem;
      border: 1px solid var(--line);
    }

    .step p {
      font-family: var(--sans);
      font-size: 0.95rem;
      font-weight: 300;
      color: var(--muted);
    }

    .accordion-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    details {
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.01);
      transition: border-color 0.2s;
    }

    details:hover {
      border-color: rgba(223, 255, 0, 0.3);
    }

    summary {
      list-style: none;
      cursor: pointer;
      padding: 1.5rem;
      font-family: var(--mono);
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 0.15em;
      color: var(--accent);
    }

    summary::-webkit-details-marker {
      display: none;
    }

    .details-body {
      border-top: 1px dotted var(--line);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .details-body pre {
      margin: 0;
    }

    .terminal {
      margin-top: 1rem;
      border: 1px solid var(--line);
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      padding: 2rem;
      height: 360px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
    }

    .terminal::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--accent);
    }

    .terminal-head {
      font-family: var(--mono);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--muted);
      border-bottom: 1px dotted var(--line);
      padding-bottom: 1rem;
      display: flex;
      justify-content: space-between;
    }

    .terminal-body {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      gap: 0.4rem;
      font-family: var(--mono);
    }

    .line {
      font-size: 0.8rem;
      opacity: 0.4;
      transition: all 0.1s;
    }

    .line::before {
      content: ">> ";
      opacity: 0.5;
    }

    .line.active {
      color: var(--accent);
      opacity: 1;
      text-shadow: 0 0 8px var(--accent-dim);
    }

    .terminal-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 1rem;
      border-top: 1px dotted var(--line);
      padding-top: 1rem;
    }

    .footer {
      margin-top: 1rem;
      border: 1px solid var(--line);
      background: var(--bg);
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
      font-family: var(--sans);
      font-size: 0.85rem;
      color: var(--muted);
      font-weight: 300;
    }

    /* --- Easter Egg Styles --- */
    #domain-expansion-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #000;
      z-index: 999999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;

      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      /* Add pointer-events none when hidden */
      transition: opacity 1.2s ease-in-out, visibility 1.2s;
    }

    #domain-expansion-overlay.active {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
      /* Re-enable pointer events when active */
      cursor: pointer;
    }

    .void-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .eye-container {
      width: 90%;
      max-width: 700px;
    }

    .domain-text {
      color: #80e5ff;
      font-family: var(--mono);
      letter-spacing: 0.5rem;
      text-transform: uppercase;
      margin-top: -2rem;
      opacity: 0;
      filter: drop-shadow(0 0 12px #00aaff);
      transition: opacity 2s ease-in 1s;
    }

    #domain-expansion-overlay.active .domain-text {
      opacity: 1;
    }

    .pupil-tracker {
      transition: transform 0.15s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    /* Animated Void Elements */
    .kanji-bg {
      font-family: var(--serif);
      font-size: clamp(8rem, 25vw, 25rem);
      font-weight: 700;
      fill: rgba(255, 255, 255, 0.02);
      letter-spacing: 2rem;
      pointer-events: none;
    }

    .eclipse {
      fill: #000;
      stroke: rgba(128, 229, 255, 0.1);
      stroke-width: 2;
      filter: url(#eclipse-glow);
    }

    .ring {
      fill: none;
      stroke: rgba(128, 229, 255, 0.15);
      stroke-width: 1;
      stroke-dasharray: 4 12;
      transform-origin: 50% 50%;
    }

    .ring-1 {
      animation: spin 40s linear infinite;
      stroke-dasharray: 2 6;
      opacity: 0.5;
    }

    .ring-2 {
      animation: spin 60s linear infinite reverse;
      stroke-dasharray: 8 24;
      stroke-width: 2;
    }

    .ring-3 {
      animation: spin 90s linear infinite;
      stroke-dasharray: 1 4;
      opacity: 0.3;
    }

    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    .floating-cloth {
      fill: none;
      stroke: rgba(0, 0, 0, 0.8);
      stroke-width: 15vw;
      stroke-linecap: round;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.9));
      opacity: 0;
      transition: opacity 2s ease-in 0.5s;
      transform-origin: center;
      animation: clothSway 15s ease-in-out infinite;
    }

    .cloth-delayed {
      animation-delay: -7s;
      animation-duration: 20s;
      stroke-width: 8vw;
    }

    #domain-expansion-overlay.active .floating-cloth {
      opacity: 0.9;
    }

    @keyframes clothSway {

      0%,
      100% {
        transform: translateY(0) scaleY(1);
      }

      50% {
        transform: translateY(-30px) scaleY(1.05);
      }
    }

    .watermark {
      font-family: var(--mono);
      font-size: 0.85rem;
      letter-spacing: 0.4em;
      fill: rgba(255, 255, 255, 0.1);
    }

    /* Mask Pull Down Animation */
    .mask-group {
      transform-origin: 50% 50%;
      transition: transform 2s cubic-bezier(0.2, 0.8, 0.2, 1) 0.5s, opacity 1s ease-in;
    }

    #domain-expansion-overlay.active .mask-group {
      transform: translateY(120px) rotate(5deg);
      opacity: 0;
      /* Fade it out slightly as it drops out of frame */
    }

    @media (max-width: 860px) {
      :root {
        --serif: ui-serif, Georgia, serif;
        --sans:
          system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
          Arial, sans-serif;
        --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      }

      * {
        cursor: auto;
      }

      body {
        background-image: none;
      }

      .canvas-wrap {
        display: none;
      }

      .grid {
        grid-template-columns: 1fr;
      }

      nav,
      .hero,
      .terminal {
        backdrop-filter: none;
      }

      .status-dot {
        animation: none;
        box-shadow: none;
      }

      .hero {
        padding: 4rem 1.5rem;
      }

      .section {
        padding: 3rem 1.5rem;
      }

      .hero,
      .card,
      .btn,
      .line,
      .step,
      details,
      a {
        transition: none !important;
      }

      .hero:hover,
      .card:hover,
      .btn:hover {
        box-shadow: none;
        transform: none;
      }

      .section:hover {
        border-left: 1px solid var(--line);
      }

      .step:hover,
      details:hover {
        border-left-color: var(--line);
        border-color: var(--line);
      }

      .config-grid {
        grid-template-columns: 1fr;
      }

      .install-strip {
        padding: 2rem 1.5rem;
      }

      .terminal {
        padding: 1.5rem;
        height: 400px;
      }
    }
  </style>
</head>

<body>
  <!-- Persistent Subliminal Gojo Motif (Behind Everything) -->
  <svg class="gojo-subliminal-bg" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <!-- Fades from slightly visible at top to completely invisible at bottom -->
      <linearGradient id="subliminal-fade" x1="0" y1="0" x2="0" y2="1">
        <!-- TEMPORARILY BOOSTED COLORS FOR VERIFICATION -->
        <stop offset="0%" stop-color="var(--accent)" />
        <stop offset="40%" stop-color="rgba(223, 255, 0, 0.4)" />
        <stop offset="80%" stop-color="rgba(255, 255, 255, 0.1)" />
      </linearGradient>
    </defs>
    <g fill="none" stroke="url(#subliminal-fade)" stroke-width="4">
      <!-- Giant Limitless Loop Background -->
      <path
        d="M 250 500 C 50 350, 50 650, 250 500 C 450 350, 550 350, 750 500 C 950 650, 950 350, 750 500 C 550 650, 450 650, 250 500 Z"
        stroke-width="2" stroke-dasharray="4 12" />

      <!-- Abstract Face / Spiky Hair -->
      <path
        d="M 350 450 Q 300 350 280 250 Q 350 300 380 320 Q 390 200 420 150 Q 450 250 480 300 Q 500 100 550 80 Q 580 200 600 280 Q 650 150 680 180 Q 650 300 700 350 Q 650 400 650 450"
        stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />

      <!-- Blindfold Band -->
      <path d="M 320 440 C 450 460, 550 460, 680 440 L 690 540 C 550 560, 450 560, 310 540 Z" stroke-width="6"
        fill="rgba(223, 255, 0, 0.05)" />

      <!-- Jawline -->
      <path d="M 340 540 Q 400 700 500 750 Q 600 700 660 540" stroke-width="4" stroke-linecap="round" />

      <!-- High Tech Collar -->
      <path d="M 380 720 L 380 900 M 620 720 L 620 900" stroke-width="5" stroke-dasharray="10 10" />
      <path d="M 300 800 Q 500 850 700 800" stroke-width="3" />

      <!-- The Six Eyes Geometry hiding under the blindfold -->
      <circle cx="430" cy="490" r="15" stroke-dasharray="2 4" />
      <circle cx="570" cy="490" r="15" stroke-dasharray="2 4" />
      <line x1="445" y1="490" x2="555" y2="490" stroke-dasharray="2 8" />
    </g>
  </svg>

  <div class="canvas-wrap">
    <canvas id="vector-canvas"></canvas>
  </div>

  <div class="container">
    <nav>
      <div class="nav-brand">
        <div class="status-dot"></div>
        <span>Satori // MCP Engine // Six Tools • Six Eyes</span>
      </div>
      <div class="nav-links">
        <a href="https://satori-mcp.vercel.app" target="_blank">[ Live ]</a>
        <a href="https://github.com/ham-zax/satori" target="_blank">[ Repository ]</a>
        <a href="architecture.html">[ Architecture ]</a>
        <a href="https://github.com/ham-zax/satori/blob/main/README.md" target="_blank">[ Docs ]</a>
      </div>
    </nav>

    <section class="hero">
      <h1>Satori</h1>
      <h2>Your agent finally knows your codebase.</h2>
      <p>
        Agents <span class="sel sel-risk">re-implement what already exists</span>,
        call functions with <span class="sel sel-risk">the wrong signatures</span>,
        and miss the right abstraction — because they&apos;re
        <span class="sel sel-risk">navigating blind</span>. Satori is an MCP
        server that gives agents
        <span class="sel sel-core">exact, structurally-aware access</span> to
        your code. <span class="sel sel-flow">Ask in natural language</span>.
        Get back <span class="sel sel-trust">the exact symbol</span>.
      </p>
      <div class="hero-meta">
        MIT and free to use. Works with any MCP-capable agent or client.
      </div>
      <div class="hero-meta">
        Zilliz Cloud (Milvus) free tier supports indexing up to 5 codebases.
      </div>
      <div class="hero-meta">Six tools. One workflow. (Six eyes mode.)</div>
      <div class="hero-meta">
        Index your repo in 2 minutes. Ask it something only a senior engineer
        would know.
      </div>
    </section>

    <section class="install-strip">
      <div class="install-top">
        <div class="install-title">Get Running in 30 Seconds</div>
      </div>
      <p class="install-note">
        Add this block to your agent&apos;s MCP config. That&apos;s it.
      </p>
      <div class="config-grid">
        <div class="config-card">
          <div class="config-head">
            <div class="install-title">For Codex (TOML)</div>
            <button class="btn copy-btn" data-copy="codex-config-top">
              Copy Codex
            </button>
          </div>
          <pre><code id="codex-config-top">[mcp_servers.satori]
command = "npx"
args = ["-y", "--prefer-offline", "@zokizuan/satori-mcp@3.7.0"]
startup_timeout_ms = 180000
env = { EMBEDDING_PROVIDER = "VoyageAI", EMBEDDING_MODEL = "voyage-4-large", EMBEDDING_OUTPUT_DIMENSION = "1024", VOYAGEAI_API_KEY = "your-api-key", VOYAGEAI_RERANKER_MODEL = "rerank-2.5", MILVUS_ADDRESS = "your-milvus-endpoint", MILVUS_TOKEN = "your-milvus-token" }</code></pre>
        </div>
        <div class="config-card">
          <div class="config-head">
            <div class="install-title">For OpenCode / Claude</div>
            <button class="btn copy-btn" data-copy="claude-config-top">
              Copy OpenCode/Claude
            </button>
          </div>
          <pre><code id="claude-config-top">"satori": {
  "type": "local",
  "command": [
    "npx",
    "-y",
    "--prefer-offline",
    "@zokizuan/satori-mcp@3.7.0"
  ],
  "enabled": true,
  "timeout": 30000,
  "environment": {
    "MILVUS_ADDRESS": "your-milvus-endpoint",
    "MILVUS_TOKEN": "your-milvus-token",
    "VOYAGEAI_API_KEY": "your-api-key",
    "EMBEDDING_PROVIDER": "VoyageAI",
    "EMBEDDING_MODEL": "voyage-4-large",
    "EMBEDDING_OUTPUT_DIMENSION": "1024",
    "VOYAGEAI_RERANKER_MODEL": "rerank-2.5"
  }
}</code></pre>
        </div>
      </div>
    </section>

    <section class="section">
      <h3>Agents Are Flying Blind</h3>
      <p class="section-intro">
        <span class="sel sel-risk">grep doesn&apos;t understand behavior</span>.
        <span class="sel sel-risk">Generic RAG gives context-free chunks</span>.
        Neither knows your <span class="sel sel-core">call graph</span>, your
        <span class="sel sel-core">symbol map</span>, or
        <span class="sel sel-risk">what changed ten minutes ago</span>.
      </p>
      <div class="grid">
        <article class="card">
          <h4>&quot;Your agent just rebuilt utils/retry.ts. Again.&quot;</h4>
          <p>
            Without structural awareness, agents can&apos;t find what already
            exists. They write new code instead of using yours.
          </p>
        </article>
        <article class="card">
          <h4>&quot;Called with 2 args. Takes 4.&quot;</h4>
          <p>
            Stale or missing context means wrong calls. Every time an agent
            works from a hallucinated understanding of your API surface, it
            produces broken code.
          </p>
        </article>
        <article class="card">
          <h4>&quot;Test fixtures in first position. Again.&quot;</h4>
          <p>
            Generic retrieval doesn&apos;t understand runtime vs test noise.
            You get contaminated context, and the agent builds on it.
          </p>
        </article>
        <article class="card">
          <h4>&quot;What did the agent actually read?&quot;</h4>
          <p>
            Without cited sources and exact line spans, you can&apos;t audit
            AI decisions. You&apos;re reviewing changes you can&apos;t trace.
          </p>
        </article>
      </div>
    </section>

    <section class="section">
      <h3>Four Tool Calls. A Complete Investigation.</h3>
      <p class="section-intro">
        Satori exposes <span class="sel sel-flow">exactly six MCP tools</span>.
        The <span class="sel sel-flow">north-star workflow</span> gets from
        question to edit-ready context in
        <span class="sel sel-trust">four deterministic, cited steps</span>.
      </p>
      <div class="steps">
        <div class="step">
          <strong>1. Search</strong>
          <code>search_codebase({
  path: "/repo",
  query: "auth token refresh flow",
  scope: "runtime",
  resultMode: "grouped",
  groupBy: "symbol",
  limit: 5
})</code>
          <p>
            Semantic search over runtime code only. Returns symbol-grouped
            results with a <code>callGraphHint</code> ready for the next
            tool.
          </p>
        </div>
        <div class="step">
          <strong>2. Traverse</strong>
          <code>call_graph({
  path: "/repo",
  symbolRef: &lt;from callGraphHint&gt;,
  direction: "both",
  depth: 2
})</code>
          <p>
            Callers + callees, depth-bounded. Before editing, the agent
            understands blast radius.
          </p>
        </div>
        <div class="step">
          <strong>3. Map</strong>
          <code>file_outline({
  path: "/repo",
  file: "src/auth/session.ts",
  limitSymbols: 50
})</code>
          <p>
            Deterministic symbol map for the file. Use
            <code>resolveMode=exact</code> to jump by label or ID.
          </p>
        </div>
        <div class="step">
          <strong>4. Read</strong>
          <code>read_file({
  path: "/repo",
  open_symbol: "refreshToken",
  mode: "annotated"
})</code>
          <p>
            Exact symbol span opens. Annotated mode returns content +
            outline status in one call.
          </p>
        </div>
      </div>
    </section>

    <section class="section">
      <h3>Built for the Real Conditions of Active Repos</h3>
      <p class="section-intro">
        Most retrieval tools work in demos. Satori is designed for repos that
        are <span class="sel sel-risk">changing</span>,
        <span class="sel sel-risk">messy</span>, and
        <span class="sel sel-core">real</span>.
      </p>
      <div class="grid">
        <article class="card">
          <h4>Merkle Incremental Sync</h4>
          <p>
            Stat-first hash-on-change. Only files that actually changed get
            re-embedded. Most syncs are seconds.
          </p>
        </article>
        <article class="card">
          <h4>Git-Aware Ranking</h4>
          <p>
            <code>rankingMode=auto_changed_first</code> boosts recently-changed
            files so results match what you’re working on now.
          </p>
        </article>
        <article class="card">
          <h4>Scope Filtering</h4>
          <p>
            <code>scope=runtime</code> excludes tests/fixtures/docs from code
            search. <code>docs</code> targets documentation only.
            <code>mixed</code> includes everything.
          </p>
        </article>
        <article class="card">
          <h4>Noise Self-Healing</h4>
          <p>
            When noise dominates top results,
            <code>hints.noiseMitigation</code> tells you exactly what to add
            to <code>.satoriignore</code>. Wait one debounce window (default
            5s). Done.
          </p>
        </article>
        <article class="card">
          <h4>Fingerprint Gates</h4>
          <p>
            Incompatible index states are blocked with a deterministic
            <code>requires_reindex</code> envelope — no silent stale reads.
          </p>
        </article>
        <article class="card">
          <h4>Partial-Scan Safety</h4>
          <p>
            If a file is temporarily unreadable, prior state is preserved. No
            false removals, no destructive churn.
          </p>
        </article>
      </div>
    </section>

    <section class="section">
      <h3>The Same Query Returns the Same Result. Always.</h3>
      <p class="section-intro">
        <span class="sel sel-trust">Determinism is a design contract</span>,
        not an aspiration. Every comparator, tie-break chain, group selection,
        and warning is <span class="sel sel-trust">explicit in code</span> and
        <span class="sel sel-flow">verified in a regression matrix</span>.
      </p>
      <pre><code>Deterministic tie-break chain:
score desc → file asc → start_line asc → symbol label asc → symbol id asc</code></pre>
      <p class="section-intro" style="margin-top: 1.5rem">
        <span class="sel sel-trust">Deterministic retrieval</span> makes agent
        behavior reproducible: when something breaks, you can
        <span class="sel sel-flow">replay it</span>. When something works, you
        can <span class="sel sel-flow">rely on it repeating</span>.
      </p>
    </section>

    <section class="section">
      <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 2rem;">
        <div style="flex: 1; min-width: 300px;">
          <h3>Six Tools. Six Eyes.</h3>
          <p class="section-intro">
            The whole API footprint is
            <span class="sel sel-flow">six MCP tools</span> —
            <span class="sel sel-core">minimal routing</span>,
            <span class="sel sel-trust">maximal auditability</span>. Perfect
            clarity.
          </p>
        </div>
        <!-- Geometric Six Eyes Motif -->
        <svg width="140" height="140" viewBox="0 0 100 100"
          style="opacity: 0.8; filter: drop-shadow(0 0 8px var(--accent-dim)); margin-bottom: 2rem;">
          <!-- Outer Limitless Boundary -->
          <circle cx="50" cy="50" r="45" fill="none" stroke="var(--line)" stroke-width="1" stroke-dasharray="2 4" />
          <circle cx="50" cy="50" r="35" fill="none" stroke="var(--accent)" stroke-width="1.5" opacity="0.5" />

          <!-- 6 glowing crystalline nodes (The Six Eyes) -->
          <circle cx="50" cy="20" r="4" fill="var(--accent)" />
          <circle cx="50" cy="80" r="4" fill="var(--accent)" />
          <circle cx="20" cy="50" r="4" fill="var(--accent)" />
          <circle cx="80" cy="50" r="4" fill="var(--accent)" />
          <circle cx="35" cy="35" r="3" fill="#ffffff" />
          <circle cx="65" cy="65" r="3" fill="#ffffff" />

          <!-- Sacred Geometry Connecting Lines -->
          <path d="M 50 20 L 80 50 L 50 80 L 20 50 Z" fill="none" stroke="var(--accent)" stroke-width="1"
            opacity="0.6" />
          <path d="M 35 35 L 65 65" fill="none" stroke="#ffffff" stroke-width="1" opacity="0.4"
            stroke-dasharray="2 2" />
          <circle cx="50" cy="50" r="10" fill="none" stroke="var(--accent)" stroke-width="1" />
          <circle cx="50" cy="50" r="2" fill="#ffffff" />
        </svg>
      </div>
      <div class="grid">
        <article class="card">
          <h4><code>list_codebases</code></h4>
          <p>
            Shows tracked repos grouped by state (Ready / Indexing / Requires
            Reindex / Failed). Start every session here.
          </p>
        </article>
        <article class="card">
          <h4><code>manage_index</code></h4>
          <p>
            Create, reindex, sync, status, clear. First-time setup, recovery,
            or manual freshness triggers.
          </p>
        </article>
        <article class="card">
          <h4><code>search_codebase</code></h4>
          <p>
            Primary retrieval: scope + grouping + ranking + sync-on-read
            freshness. The tool you call most.
          </p>
        </article>
        <article class="card">
          <h4><code>file_outline</code></h4>
          <p>
            Deterministic symbol map + exact resolver
            (<code>resolveMode=exact</code>). Use before editing.
          </p>
        </article>
        <article class="card">
          <h4><code>call_graph</code></h4>
          <p>
            Callers/callees traversal, depth-bounded. Know blast radius
            before touching critical code.
          </p>
        </article>
        <article class="card">
          <h4><code>read_file</code></h4>
          <p>
            Content + exact spans + <code>open_symbol</code> + annotated
            envelope. Final step: open only what matters.
          </p>
        </article>
      </div>
    </section>

    <section class="section">
      <h3>Failure States Have Deterministic Fixes</h3>
      <p class="section-intro">
        When things go wrong, the tool tells you
        <span class="sel sel-flow">exactly what to do next</span> —
        <span class="sel sel-trust">no guesswork</span>.
      </p>
      <div class="accordion-list">
        <details>
          <summary>Requires Reindex</summary>
          <div class="details-body">
            <p>
              Any <code>requires_reindex</code> response includes
              <code>hints.reindex</code> with the exact command to run:
            </p>
            <pre><code>manage_index({ action: "reindex", path: &lt;hints.reindex.args.path&gt; })
// then retry the original tool call</code></pre>
          </div>
        </details>
        <details>
          <summary>Noisy Results</summary>
          <div class="details-body">
            <p>
              If <code>hints.noiseMitigation</code> appears, apply the
              suggested <code>.satoriignore</code> patterns, wait one debounce
              window (default 5s), then rerun search.
            </p>
          </div>
        </details>
        <details>
          <summary>Call Graph Not Ready</summary>
          <div class="details-body">
            <p>
              If <code>call_graph</code> returns <code>not_ready</code> /
              missing sidecar, reindex. While waiting, every search result
              includes <code>navigationFallback</code> (executable readSpan +
              optional fileOutlineWindow).
            </p>
          </div>
        </details>
        <details>
          <summary>File Not Found</summary>
          <div class="details-body">
            <p>
              Run <code>search_codebase</code> with the filename in the query
              and <code>scope: docs</code> or <code>scope: mixed</code>, then
              pivot to the canonical path.
            </p>
          </div>
        </details>
        <details>
          <summary>Collection Limit Reached</summary>
          <div class="details-body">
            <p>
              Zilliz free tier limits collections.
              <code>manage_index create</code> returns guided text naming a
              collection to drop. Retry with <code>zillizDropCollection</code>.
            </p>
          </div>
        </details>
      </div>
    </section>

    <section class="section">
      <h3>Quickstart (Progressive Disclosure)</h3>
      <p class="section-intro">
        Start with the minimum. Open details only when you need them.
      </p>
      <div class="accordion-list">
        <details>
          <summary>MCP Config (Copy-Paste)</summary>
          <div class="details-body">
            <div class="config-grid">
              <div class="config-card">
                <div class="config-head">
                  <div class="install-title">Codex TOML</div>
                  <button class="btn copy-btn" data-copy="codex-config">
                    Copy
                  </button>
                </div>
                <pre><code id="codex-config">[mcp_servers.satori]
command = "npx"
args = ["-y", "--prefer-offline", "@zokizuan/satori-mcp@3.7.0"]
startup_timeout_ms = 180000
env = { EMBEDDING_PROVIDER = "VoyageAI", EMBEDDING_MODEL = "voyage-4-large", EMBEDDING_OUTPUT_DIMENSION = "1024", VOYAGEAI_API_KEY = "your-api-key", VOYAGEAI_RERANKER_MODEL = "rerank-2.5", MILVUS_ADDRESS = "your-milvus-endpoint", MILVUS_TOKEN = "your-milvus-token" }</code></pre>
              </div>
              <div class="config-card">
                <div class="config-head">
                  <div class="install-title">OpenCode / Claude</div>
                  <button class="btn copy-btn" data-copy="claude-config">
                    Copy
                  </button>
                </div>
                <pre><code id="claude-config">"satori": {
  "type": "local",
  "command": [
    "npx",
    "-y",
    "--prefer-offline",
    "@zokizuan/satori-mcp@3.7.0"
  ],
  "enabled": true,
  "timeout": 30000,
  "environment": {
    "MILVUS_ADDRESS": "your-milvus-endpoint",
    "MILVUS_TOKEN": "your-milvus-token",
    "VOYAGEAI_API_KEY": "your-api-key",
    "EMBEDDING_PROVIDER": "VoyageAI",
    "EMBEDDING_MODEL": "voyage-4-large",
    "EMBEDDING_OUTPUT_DIMENSION": "1024",
    "VOYAGEAI_RERANKER_MODEL": "rerank-2.5"
  }
}</code></pre>
              </div>
            </div>
          </div>
        </details>

        <details>
          <summary>Search Options (Six Eyes Mode: Scope, Grouping, Graph Jump)</summary>
          <div class="details-body">
            <pre><code># Runtime-first grouped search (default mode)
satori.search_codebase({"path":"/repo","query":"auth flow","scope":"runtime","resultMode":"grouped","groupBy":"symbol","limit":10})

# Docs-only investigation
satori.search_codebase({"path":"/repo","query":"migration guide","scope":"docs","resultMode":"raw","limit":10})

# File-level grouping + debug traces
satori.search_codebase({"path":"/repo","query":"retry policy","scope":"mixed","resultMode":"grouped","groupBy":"file","limit":12,"debug":true})

# Call graph jump from grouped result hint
satori.call_graph({"path":"/repo","symbolRef":{"file":"src/auth.ts","symbolId":"sym_auth_refresh"},"direction":"both","depth":2,"limit":20})</code></pre>
            <p>
              Grouped mode returns freshness + symbol metadata and a
              discriminated <code>callGraphHint</code> (`supported: true|false`).
            </p>
          </div>
        </details>

        <details>
          <summary>
            Real Agent Trace (Docs Investigation + Missing Path Recovery)
          </summary>
          <div class="details-body">
            <pre><code>Called satori.file_outline({"path":"/home/hamza/repo/tradingview_ratio","file":"src/auth/session.ts","limitSymbols":50})
Called satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/docs/CLI_COMMANDS.md","start_line":1,"end_line":220,"mode":"annotated"})
Result: "QAP CLI Command Reference ..."

Called satori.search_codebase({"path":"/home/hamza/repo/tradingview_ratio","query":"MASTER_AUDIT.md location current path archived","scope":"docs","resultMode":"raw","limit":10})
Hit: docs/research/PHASES_OVERVIEW.md:322-371

Called satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/archive/docs/northstar/core/INVARIANTS.md","start_line":1,"end_line":220,"mode":"annotated"})
Error: File not found

Fallback:
satori.search_codebase({"path":"/home/hamza/repo/tradingview_ratio","query":"northstar/core/INVARIANTS.md docs/INVARIANTS.md reference mismatch","scope":"docs","resultMode":"raw","limit":10})
satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/docs/INVARIANTS.md","start_line":480,"end_line":620,"mode":"annotated"})</code></pre>
          </div>
        </details>
      </div>
    </section>

    <section class="terminal">
      <div class="terminal-head">
        <span>Satori Agent Trace Replay</span>
        <span>SYS.READY</span>
      </div>
      <div class="terminal-body" id="term-body">
        <div class="line">
          ready. click replay to run a realistic transcript.
        </div>
        <div class="line">
          pattern: status check, semantic search, read, fallback, recover.
        </div>
      </div>
      <div class="terminal-actions">
        <button class="btn" id="replay-btn">Replay Trace</button>
        <button class="btn" id="clear-btn">Clear</button>
      </div>
    </section>

    <footer class="footer">
      <span>Docs:
        <a href="https://github.com/ham-zax/satori/blob/main/README.md" target="_blank">README.md</a>
        · Architecture: <a href="architecture.html">architecture.html</a> ·
        Free tier: 5 codebases on Zilliz Cloud.</span>
      <span>Keep landing pages short. Keep docs deep. <span id="gojo-trigger"
          style="cursor: pointer; user-select: none; color: var(--line); transition: color 0.3s; padding: 0 4px;"
          title="Six Eyes Mode">[ • ]</span></span>
    </footer>
    <style>
      #gojo-trigger:hover {
        color: var(--accent) !important;
        text-shadow: 0 0 8px var(--accent-dim);
      }
    </style>
  </div>

  <!-- The Easter Egg Overlay -->
  <div id="domain-expansion-overlay">
    <svg class="void-bg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
      <defs>
        <pattern id="grid-void" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M 60 0 L 0 0 0 60" fill="none" stroke="rgba(128, 229, 255, 0.04)" stroke-width="1" />
        </pattern>
        <radialGradient id="void-core" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#000000" stop-opacity="0.6" />
          <stop offset="100%" stop-color="#000000" stop-opacity="1" />
        </radialGradient>
        <filter id="eclipse-glow">
          <feGaussianBlur stdDeviation="15" result="blur" />
          <feMerge>
            <feMergeNode in="blur" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
      </defs>

      <!-- Base Dark & Grid -->
      <rect width="100%" height="100%" fill="url(#void-core)" />
      <rect width="100%" height="100%" fill="url(#grid-void)" />

      <!-- Massive Background Kanji: 無量空処 (Infinite Void) -->
      <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" class="kanji-bg">無量空処</text>

      <!-- Domain Expansion Eclipse (Black Hole) -->
      <circle cx="50%" cy="50%" r="30vw" class="eclipse" />

      <!-- Rotating Limitless Data Rings -->
      <g class="rings-container">
        <circle cx="50%" cy="50%" r="35vw" class="ring ring-1" />
        <circle cx="50%" cy="50%" r="42vw" class="ring ring-2" />
        <circle cx="50%" cy="50%" r="48vw" class="ring ring-3" />
      </g>

      <!-- Faint Floating Blindfold Line-art -->
      <path d="M -10% 20% Q 25% 10% 50% 30% T 110% 60%" class="floating-cloth" />
      <path d="M -10% 80% Q 30% 90% 60% 70% T 110% 40%" class="floating-cloth cloth-delayed" />

      <!-- Gojo Watermark -->
      <text x="50%" y="90%" text-anchor="middle" class="watermark">SATORU GOJO // DOMAIN EXPANSION</text>
    </svg>

    <div class="eye-container">
      <svg id="gojo-eyes" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="cyan-glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="15" result="blur1" />
            <feGaussianBlur stdDeviation="30" result="blur2" />
            <feGaussianBlur stdDeviation="60" result="blur3" />
            <feMerge>
              <feMergeNode in="blur3" />
              <feMergeNode in="blur2" />
              <feMergeNode in="blur1" />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
          <filter id="subtle-glow" x="-20%" y="-20%" width="140%" height="140%">
            <feGaussianBlur stdDeviation="8" result="blur" />
            <feMerge>
              <feMergeNode in="blur" />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>

          <radialGradient id="iris-gradient" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#ffffff" />
            <stop offset="15%" stop-color="#e6ffff" />
            <stop offset="35%" stop-color="#80e5ff" />
            <stop offset="60%" stop-color="#00aaff" />
            <stop offset="85%" stop-color="#0055ff" />
            <stop offset="100%" stop-color="#001144" />
          </radialGradient>

          <!-- Crystalline pattern for the iris -->
          <pattern id="crystal" viewBox="0 0 20 20" width="10" height="10" patternUnits="userSpaceOnUse">
            <path d="M10 0 L20 10 L10 20 L0 10 Z" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="0.5" />
            <path d="M10 5 L15 10 L10 15 L5 10 Z" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="0.5" />
          </pattern>
        </defs>

        <g id="eyes-group">
          <!-- LEFT EYE -->
          <g transform="translate(150, 100)">
            <path d="M -20 50 Q 80 -10 180 50 Q 100 90 -20 50" fill="#000000" stroke="#0a0a0a" stroke-width="2" />
            <path d="M -30 45 Q 80 -25 190 45" fill="none" stroke="#000000" stroke-width="12" stroke-linecap="round"
              filter="url(#subtle-glow)" />
            <path d="M -20 55 Q 80 100 180 55" fill="none" stroke="#000000" stroke-width="6" stroke-linecap="round"
              filter="url(#subtle-glow)" />

            <!-- Eyelashes -->
            <path d="M -10 40 Q 10 20 20 15" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 30 25 Q 40 5 50 0" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 140 25 Q 150 5 160 0" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 170 40 Q 185 20 195 15" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />

            <g class="pupil-tracker" transform-origin="80 45">
              <!-- Main Iris -->
              <circle cx="80" cy="45" r="32" fill="url(#iris-gradient)" filter="url(#cyan-glow)" />
              <!-- Crystal Overlay -->
              <circle cx="80" cy="45" r="32" fill="url(#crystal)" opacity="0.6" />

              <!-- Center Core -->
              <circle cx="80" cy="45" r="10" fill="#ffffff" filter="url(#subtle-glow)" />
              <circle cx="80" cy="45" r="5" fill="#e6ffff" />

              <!-- Inner rings -->
              <circle cx="80" cy="45" r="16" fill="none" stroke="#ffffff" stroke-width="1" stroke-dasharray="1 3"
                opacity="0.9" />
              <circle cx="80" cy="45" r="22" fill="none" stroke="#80e5ff" stroke-width="0.5" opacity="0.6" />
              <circle cx="80" cy="45" r="28" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 8"
                opacity="0.7" />

              <!-- Outer glow rim -->
              <circle cx="80" cy="45" r="33" fill="none" stroke="#00aaff" stroke-width="1.5" opacity="0.8"
                filter="url(#subtle-glow)" />

              <!-- Light reflection / catchlight -->
              <ellipse cx="65" cy="25" rx="6" ry="4" fill="#ffffff" opacity="0.9" transform="rotate(-30 65 25)" />
              <circle cx="95" cy="65" r="2" fill="#ffffff" opacity="0.6" />
            </g>
          </g>

          <!-- RIGHT EYE -->
          <g transform="translate(470, 100)">
            <path d="M -20 50 Q 80 -10 180 50 Q 100 90 -20 50" fill="#000000" stroke="#0a0a0a" stroke-width="2" />
            <path d="M -30 45 Q 80 -25 190 45" fill="none" stroke="#000000" stroke-width="12" stroke-linecap="round"
              filter="url(#subtle-glow)" />
            <path d="M -20 55 Q 80 100 180 55" fill="none" stroke="#000000" stroke-width="6" stroke-linecap="round"
              filter="url(#subtle-glow)" />

            <!-- Eyelashes -->
            <path d="M -10 40 Q 10 20 20 15" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 30 25 Q 40 5 50 0" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 140 25 Q 150 5 160 0" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
            <path d="M 170 40 Q 185 20 195 15" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />

            <g class="pupil-tracker" transform-origin="80 45">
              <!-- Main Iris -->
              <circle cx="80" cy="45" r="32" fill="url(#iris-gradient)" filter="url(#cyan-glow)" />
              <!-- Crystal Overlay -->
              <circle cx="80" cy="45" r="32" fill="url(#crystal)" opacity="0.6" />

              <!-- Center Core -->
              <circle cx="80" cy="45" r="10" fill="#ffffff" filter="url(#subtle-glow)" />
              <circle cx="80" cy="45" r="5" fill="#e6ffff" />

              <!-- Inner rings -->
              <circle cx="80" cy="45" r="16" fill="none" stroke="#ffffff" stroke-width="1" stroke-dasharray="1 3"
                opacity="0.9" />
              <circle cx="80" cy="45" r="22" fill="none" stroke="#80e5ff" stroke-width="0.5" opacity="0.6" />
              <circle cx="80" cy="45" r="28" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 8"
                opacity="0.7" />

              <!-- Outer glow rim -->
              <circle cx="80" cy="45" r="33" fill="none" stroke="#00aaff" stroke-width="1.5" opacity="0.8"
                filter="url(#subtle-glow)" />

              <!-- Light reflection / catchlight -->
              <ellipse cx="65" cy="25" rx="6" ry="4" fill="#ffffff" opacity="0.9" transform="rotate(-30 65 25)" />
              <circle cx="95" cy="65" r="2" fill="#ffffff" opacity="0.6" />
            </g>
          </g>

          <!-- THE BLINDFOLD MASK (Pulls down when triggered) -->
          <g class="mask-group">
            <!-- Deep drop shadow behind mask -->
            <path d="M 0 0 L 800 0 L 800 180 Q 400 230 0 180 Z" fill="rgba(0,0,0,0.8)" filter="url(#subtle-glow)" />

            <!-- Main Mask Fabric -->
            <path d="M -50 0 L 850 0 L 850 170 Q 400 210 -50 170 Z" fill="#050507" />

            <!-- Fabric Folds & Highlights (Black/Dark Grey) -->
            <path d="M 100 160 Q 200 80 400 190" fill="none" stroke="#111" stroke-width="6" stroke-linecap="round" />
            <path d="M 350 195 Q 500 100 700 150" fill="none" stroke="#111" stroke-width="4" stroke-linecap="round" />
            <path d="M 250 20 Q 300 100 280 180" fill="none" stroke="#020202" stroke-width="15" stroke-linecap="round"
              opacity="0.5" />
            <path d="M 550 10 Q 500 100 520 170" fill="none" stroke="#020202" stroke-width="12" stroke-linecap="round"
              opacity="0.5" />

            <!-- Bottom jagged edge for realism -->
            <path d="M -50 170 Q 150 200 400 210 Q 650 200 850 170 L 850 175 Q 650 205 400 215 Q 150 205 -50 175 Z"
              fill="#000000" />
          </g>

        </g>
      </svg>
    </div>

    <p class="domain-text">Infinite Void</p>
  </div>

  <script>
    // --- Easter Egg Logic ---
    document.addEventListener('DOMContentLoaded', () => {
      const trigger = document.getElementById('gojo-trigger');
      const overlay = document.getElementById('domain-expansion-overlay');
      const pupils = document.querySelectorAll('.pupil-tracker');

      let clickCount = 0;
      let clickTimeout;

      if (trigger) {
        trigger.addEventListener('click', (e) => {
          e.preventDefault();
          clickCount++;
          clearTimeout(clickTimeout);

          if (clickCount >= 1) { // Trigger on single click now since it's an explicit button
            overlay.classList.add('active');
            clickCount = 0;
          } else {
            clickTimeout = setTimeout(() => clickCount = 0, 1500);
          }
        });
      }

      if (overlay) {
        overlay.addEventListener('click', () => {
          overlay.classList.remove('active');
          setTimeout(() => {
            pupils.forEach(pupil => pupil.style.transform = `translate(0px, 0px)`);
          }, 1200);
        });

        function moveEyes(clientX, clientY) {
          if (!overlay.classList.contains('active')) return;

          const moveX = (clientX - window.innerWidth / 2) / (window.innerWidth / 2);
          const moveY = (clientY - window.innerHeight / 2) / (window.innerHeight / 2);

          const maxMovement = 20;

          pupils.forEach(pupil => {
            pupil.style.transform = `translate(${moveX * maxMovement}px, ${moveY * maxMovement}px)`;
          });
        }

        overlay.addEventListener('mousemove', (e) => moveEyes(e.clientX, e.clientY));

        overlay.addEventListener('touchmove', (e) => {
          e.preventDefault();
          moveEyes(e.touches[0].clientX, e.touches[0].clientY);
        }, { passive: false });
      }
    });

    const canvas = document.getElementById("vector-canvas");
    const ctx = canvas.getContext("2d");
    let w = 0;
    let h = 0;
    let particles = [];

    function resizeCanvas() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }

    class Particle {
      constructor() {
        this.x = Math.random() * w;
        this.y = Math.random() * h;
        this.vx = (Math.random() - 0.5) * 0.22;
        this.vy = (Math.random() - 0.5) * 0.22;
        this.r = Math.random() * 1.3 + 0.3;
      }

      step() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0) this.x = w;
        if (this.x > w) this.x = 0;
        if (this.y < 0) this.y = h;
        if (this.y > h) this.y = 0;
      }

      draw() {
        ctx.fillStyle = "rgba(246,246,246,0.55)";
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function initParticles() {
      particles = [];
      for (let i = 0; i < 120; i++) {
        particles.push(new Particle());
      }
    }

    function animate() {
      ctx.clearRect(0, 0, w, h);
      for (let i = 0; i < particles.length; i++) {
        particles[i].step();
        particles[i].draw();
      }
      requestAnimationFrame(animate);
    }

    const isSmallViewport = window.matchMedia("(max-width: 860px)").matches;
    if (!isSmallViewport) {
      resizeCanvas();
      initParticles();
      animate();
      window.addEventListener("resize", () => {
        resizeCanvas();
        initParticles();
      });
    }

    const copyButtons = document.querySelectorAll(".copy-btn");
    copyButtons.forEach((btn) => {
      btn.addEventListener("click", async () => {
        const targetId = btn.getAttribute("data-copy");
        const source = document.getElementById(targetId);
        if (!source) return;
        try {
          await navigator.clipboard.writeText(source.textContent);
          const prev = btn.textContent;
          btn.textContent = "Copied";
          setTimeout(() => {
            btn.textContent = prev;
          }, 1000);
        } catch {
          const prev = btn.textContent;
          btn.textContent = "Copy failed";
          setTimeout(() => {
            btn.textContent = prev;
          }, 1200);
        }
      });
    });

    const termBody = document.getElementById("term-body");
    function addLog(line, active = false) {
      const row = document.createElement("div");
      row.className = `line${active ? " active" : ""}`;
      row.textContent = line;
      termBody.appendChild(row);
      if (termBody.children.length > 14) {
        termBody.removeChild(termBody.firstChild);
      }
    }

    const traceLines = [
      "Called satori.list_codebases({})",
      "→ Ready: /home/hamza/repo/satori",
      'Called satori.manage_index({action: "status", path: "/repo"})',
      "sync completed | +0 added, -0 removed, ~0 modified",
      'Called satori.search_codebase({query: "auth refresh token flow", scope: "runtime", resultMode: "grouped", groupBy: "symbol", limit: 5})',
      "→ Hit: src/auth/session.ts:88-141",
      '→ callGraphHint.symbolRef: { file: "src/auth/session.ts", symbolId: "sym_auth_refresh" }',
      'Called satori.call_graph({symbolRef: { file: "src/auth/session.ts", symbolId: "sym_auth_refresh" }, direction: "both", depth: 2})',
      "→ 6 nodes | 8 edges | 1 unresolved note",
      'Called satori.file_outline({path: "/repo", file: "src/auth/session.ts", limitSymbols: 50})',
      "→ 12 symbols resolved | spans locked",
      'Called satori.read_file({path: "src/auth/session.ts", open_symbol: "refreshToken", mode: "annotated"})',
      "→ lines 88-141 | outlineStatus: ok | no warnings",
    ];

    const replayBtn = document.getElementById("replay-btn");
    const clearBtn = document.getElementById("clear-btn");
    let traceInterval;

    replayBtn.addEventListener("click", () => {
      clearInterval(traceInterval);
      let i = 0;
      traceInterval = setInterval(() => {
        if (i >= traceLines.length) {
          clearInterval(traceInterval);
          return;
        }
        const active =
          traceLines[i].startsWith("Hit:") ||
          traceLines[i].startsWith("→ Hit:") ||
          traceLines[i].startsWith("Error:");
        addLog(traceLines[i], active);
        i++;
      }, 170);
    });

    clearBtn.addEventListener("click", () => {
      clearInterval(traceInterval);
      termBody.innerHTML = "";
      addLog("ready. click replay to run a realistic transcript.");
      addLog(
        "pattern: status check, semantic search, read, fallback, recover.",
      );
    });
  </script>
</body>

</html>
