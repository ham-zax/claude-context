<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Satori | Agent-Safe Code Retrieval via MCP</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
      media="(min-width: 861px)"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
      media="(min-width: 861px)"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@100;400;700&display=swap"
      rel="stylesheet"
      media="(min-width: 861px)"
    />
    <style>
      :root {
        --bg: #000000;
        --panel: rgba(10, 10, 10, 0.85);
        --fg: #ffffff;
        --muted: rgba(255, 255, 255, 0.55);
        --line: rgba(255, 255, 255, 0.15);
        --accent: #dfff00; /* Radioactive Chartreuse */
        --accent-dim: rgba(223, 255, 0, 0.15);
        --serif: "Cormorant Garamond", serif;
        --sans: "Inter", sans-serif;
        --mono: "JetBrains Mono", monospace;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        cursor: crosshair;
      }

      body {
        min-height: 100vh;
        color: var(--fg);
        font-family: var(--sans);
        background-color: var(--bg);
        background-image:
          linear-gradient(var(--line) 1px, transparent 1px),
          linear-gradient(90deg, var(--line) 1px, transparent 1px);
        background-size: 50px 50px;
        background-position: center center;
        line-height: 1.6;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
      }

      ::selection {
        background: var(--accent);
        color: #060607;
      }

      .canvas-wrap {
        position: fixed;
        inset: 0;
        pointer-events: none;
        opacity: 0.2;
        z-index: 0;
      }

      #vector-canvas {
        width: 100%;
        height: 100%;
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1080px;
        margin: 0 auto;
        padding: 1rem 1rem 4rem;
      }

      nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 1rem;
        border: 1px solid var(--line);
        padding: 1.2rem 1.5rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        font-size: 0.75rem;
        font-family: var(--mono);
        background: var(--bg);
        backdrop-filter: blur(10px);
        position: sticky;
        top: 1rem;
        z-index: 100;
      }

      .nav-brand {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        background: var(--accent);
        border-radius: 50%;
        box-shadow: 0 0 10px var(--accent);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: scale(0.9);
        }
      }

      .nav-links {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
      }

      a {
        color: var(--fg);
        text-decoration: none;
      }

      a:hover {
        color: var(--accent);
      }

      .hero {
        margin-top: 2rem;
        border: 1px solid var(--line);
        padding: 5rem 2rem;
        background: var(--bg);
        backdrop-filter: blur(10px);
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        transition: border-color 0.3s;
      }

      .hero:hover {
        border-color: var(--accent);
        box-shadow: 0 0 40px var(--accent-dim);
      }

      .hero h1 {
        font-family: var(--serif);
        font-size: clamp(4rem, 12vw, 9rem);
        line-height: 0.8;
        font-weight: 300;
        letter-spacing: -0.04em;
        transition:
          color 0.2s,
          text-shadow 0.2s;
      }

      .hero h1:hover {
        color: var(--accent);
        text-shadow: 0 0 60px var(--accent-dim);
      }

      .hero h2 {
        margin-top: 1.5rem;
        font-family: var(--sans);
        font-size: clamp(1.2rem, 3vw, 1.8rem);
        font-weight: 300;
        max-width: 800px;
      }

      .hero p {
        margin-top: 1rem;
        color: var(--muted);
        max-width: 700px;
        font-weight: 300;
        font-size: 1.1rem;
      }

      .hero-meta {
        margin-top: 2rem;
        font-family: var(--mono);
        font-size: 0.75rem;
        color: var(--accent);
        text-transform: uppercase;
        letter-spacing: 0.15em;
      }

      .install-strip {
        margin-top: 1rem;
        border: 1px solid var(--line);
        background: var(--bg);
        padding: 3rem 2rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        position: relative;
      }

      .install-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
        border-bottom: 1px dotted var(--line);
        padding-bottom: 1rem;
      }

      .install-title {
        font-family: var(--mono);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--accent);
      }

      .install-note {
        font-family: var(--sans);
        color: var(--muted);
        font-size: 1rem;
        font-weight: 300;
      }

      .config-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 1rem;
      }

      .config-card {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.01);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        transition: border-color 0.2s;
      }

      .config-card:hover {
        border-color: rgba(223, 255, 0, 0.4);
      }

      .config-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
      }

      code {
        font-family: var(--mono);
        font-size: 0.85rem;
        line-height: 1.5;
        color: var(--fg);
      }

      pre {
        margin: 0;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.6);
        padding: 1rem;
        overflow-x: auto;
        font-size: 0.8rem;
        line-height: 1.6;
        white-space: pre;
        color: var(--muted);
      }

      pre::-webkit-scrollbar {
        height: 4px;
      }

      pre::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
      }

      .btn {
        border: 1px solid var(--fg);
        background: transparent;
        color: var(--fg);
        font-family: var(--mono);
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        padding: 0.6rem 1rem;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        position: relative;
        overflow: hidden;
      }

      .btn:hover {
        background: var(--accent);
        color: var(--bg);
        border-color: var(--accent);
        box-shadow: 0 0 20px var(--accent-dim);
        font-weight: 700;
      }

      .section {
        margin-top: 1rem;
        border: 1px solid var(--line);
        background: var(--bg);
        padding: 4rem 2rem;
        position: relative;
        transition: border-left-color 0.3s;
      }

      .section:hover {
        border-left: 2px solid var(--accent);
      }

      .section h3 {
        font-family: var(--serif);
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 300;
        line-height: 0.95;
        margin-bottom: 1rem;
      }

      .section-intro {
        font-family: var(--sans);
        font-size: 1.1rem;
        font-weight: 300;
        color: var(--muted);
        max-width: 800px;
        margin-bottom: 2.5rem;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 1rem;
      }

      .card {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.01);
        padding: 2rem;
        transition: all 0.2s;
        position: relative;
        overflow: hidden;
      }

      .card:hover {
        border-color: var(--accent);
        background: rgba(223, 255, 0, 0.02);
        transform: translateY(-2px);
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 1px;
        background: var(--accent);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
      }

      .card:hover::before {
        transform: scaleX(1);
      }

      .card h4 {
        font-family: var(--mono);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--accent);
        margin-bottom: 1rem;
      }

      .card p {
        font-family: var(--sans);
        color: var(--muted);
        font-size: 0.95rem;
        font-weight: 300;
        line-height: 1.6;
      }

      .steps {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .step {
        border-left: 2px solid var(--line);
        padding-left: 1.5rem;
        position: relative;
        transition: border-color 0.2s;
      }

      .step:hover {
        border-left-color: var(--accent);
      }

      .step strong {
        display: block;
        font-family: var(--mono);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--accent);
        margin-bottom: 0.5rem;
      }

      .step code {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.8rem;
        white-space: pre-wrap;
        background: rgba(0, 0, 0, 0.4);
        padding: 0.75rem;
        border: 1px solid var(--line);
      }

      .step p {
        font-family: var(--sans);
        font-size: 0.95rem;
        font-weight: 300;
        color: var(--muted);
      }

      .accordion-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      details {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.01);
        transition: border-color 0.2s;
      }

      details:hover {
        border-color: rgba(223, 255, 0, 0.3);
      }

      summary {
        list-style: none;
        cursor: pointer;
        padding: 1.5rem;
        font-family: var(--mono);
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.15em;
        color: var(--accent);
      }

      summary::-webkit-details-marker {
        display: none;
      }

      .details-body {
        border-top: 1px dotted var(--line);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .details-body pre {
        margin: 0;
      }

      .terminal {
        margin-top: 1rem;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(10px);
        padding: 2rem;
        height: 360px;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        position: relative;
      }

      .terminal::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--accent);
      }

      .terminal-head {
        font-family: var(--mono);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--muted);
        border-bottom: 1px dotted var(--line);
        padding-bottom: 1rem;
        display: flex;
        justify-content: space-between;
      }

      .terminal-body {
        flex: 1;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        gap: 0.4rem;
        font-family: var(--mono);
      }

      .line {
        font-size: 0.8rem;
        opacity: 0.4;
        transition: all 0.1s;
      }

      .line::before {
        content: ">> ";
        opacity: 0.5;
      }

      .line.active {
        color: var(--accent);
        opacity: 1;
        text-shadow: 0 0 8px var(--accent-dim);
      }

      .terminal-actions {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-top: 1rem;
        border-top: 1px dotted var(--line);
        padding-top: 1rem;
      }

      .footer {
        margin-top: 1rem;
        border: 1px solid var(--line);
        background: var(--bg);
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
        font-family: var(--sans);
        font-size: 0.85rem;
        color: var(--muted);
        font-weight: 300;
      }

      @media (max-width: 860px) {
        :root {
          --serif: ui-serif, Georgia, serif;
          --sans:
            system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
            Arial, sans-serif;
          --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        }

        * {
          cursor: auto;
        }

        body {
          background-image: none;
        }

        .canvas-wrap {
          display: none;
        }

        .grid {
          grid-template-columns: 1fr;
        }

        nav,
        .hero,
        .terminal {
          backdrop-filter: none;
        }

        .status-dot {
          animation: none;
          box-shadow: none;
        }

        .hero {
          padding: 4rem 1.5rem;
        }

        .section {
          padding: 3rem 1.5rem;
        }

        .hero,
        .card,
        .btn,
        .line,
        .step,
        details,
        a {
          transition: none !important;
        }

        .hero:hover,
        .card:hover,
        .btn:hover {
          box-shadow: none;
          transform: none;
        }

        .section:hover {
          border-left: 1px solid var(--line);
        }

        .step:hover,
        details:hover {
          border-left-color: var(--line);
          border-color: var(--line);
        }

        .config-grid {
          grid-template-columns: 1fr;
        }

        .install-strip {
          padding: 2rem 1.5rem;
        }

        .terminal {
          padding: 1.5rem;
          height: 400px;
        }
      }
    </style>
  </head>
  <body>
    <div class="canvas-wrap">
      <canvas id="vector-canvas"></canvas>
    </div>

    <div class="container">
      <nav>
        <div class="nav-brand">
          <div class="status-dot"></div>
          <span>Satori // MCP Engine</span>
        </div>
        <div class="nav-links">
          <a href="https://satori-mcp.vercel.app" target="_blank">[ Live ]</a>
          <a href="https://github.com/ham-zax/satori" target="_blank"
            >[ Repository ]</a
          >
          <a href="architecture.html">[ Architecture ]</a>
          <a
            href="https://github.com/ham-zax/satori/blob/main/README.md"
            target="_blank"
            >[ Docs ]</a
          >
        </div>
      </nav>

      <section class="hero">
        <h1>Satori</h1>
        <h2>Stop your AI from hallucinating bad code.</h2>
        <p>
          Satori is an MCP server that gives agents exact, structurally-aware
          code retrieval. You get cleaner context, safer workflows, and faster
          path-to-edit.
        </p>
        <div class="hero-meta">
          MIT and free to use. Works with any MCP-capable agent or client.
        </div>
        <div class="hero-meta">
          Zilliz Cloud (Milvus) free tier supports indexing up to 5 codebases.
        </div>
      </section>

      <section class="install-strip">
        <div class="install-top">
          <div class="install-title">Try It In 30 Seconds</div>
        </div>
        <p class="install-note">Add this to your agent MCP config.</p>
        <div class="config-grid">
          <div class="config-card">
            <div class="config-head">
              <div class="install-title">For Codex (TOML)</div>
              <button class="btn copy-btn" data-copy="codex-config-top">
                Copy Codex
              </button>
            </div>
            <pre><code id="codex-config-top">[mcp_servers.satori]
command = "npx"
args = ["-y", "--prefer-offline", "@zokizuan/satori-mcp@3.0.0"]
startup_timeout_ms = 180000
env = { EMBEDDING_PROVIDER = "VoyageAI", EMBEDDING_MODEL = "voyage-4-large", EMBEDDING_OUTPUT_DIMENSION = "1024", VOYAGEAI_API_KEY = "your-api-key", VOYAGEAI_RERANKER_MODEL = "rerank-2.5", MILVUS_ADDRESS = "your-milvus-endpoint", MILVUS_TOKEN = "your-milvus-token" }</code></pre>
          </div>
          <div class="config-card">
            <div class="config-head">
              <div class="install-title">For OpenCode / Claude</div>
              <button class="btn copy-btn" data-copy="claude-config-top">
                Copy OpenCode/Claude
              </button>
            </div>
            <pre><code id="claude-config-top">"satori": {
  "type": "local",
  "command": [
    "npx",
    "-y",
    "--prefer-offline",
    "@zokizuan/satori-mcp@3.0.0"
  ],
  "enabled": true,
  "timeout": 30000,
  "environment": {
    "MILVUS_ADDRESS": "your-milvus-endpoint",
    "MILVUS_TOKEN": "your-milvus-token",
    "VOYAGEAI_API_KEY": "your-api-key",
    "EMBEDDING_PROVIDER": "VoyageAI",
    "EMBEDDING_MODEL": "voyage-4-large",
    "EMBEDDING_OUTPUT_DIMENSION": "1024",
    "VOYAGEAI_RERANKER_MODEL": "rerank-2.5"
  }
}</code></pre>
          </div>
        </div>
      </section>

      <section class="section">
        <h3>Why Teams Switch</h3>
        <p class="section-intro">
          Features are kept technical under the hood, but outcomes stay simple
          and predictable.
        </p>
        <div class="grid">
          <article class="card">
            <h4>Predictable Agent Behavior</h4>
            <p>
              Exactly five MCP tools reduce routing confusion while keeping
              call-chain analysis first-class.
            </p>
          </article>
          <article class="card">
            <h4>Fresh Context</h4>
            <p>
              Incremental Merkle sync re-embeds only changed files. Polling and
              watcher modes are supported.
            </p>
          </article>
          <article class="card">
            <h4>Better Retrieval Quality</h4>
            <p>
              AST-aware chunking plus dense+BM25 hybrid search with optional
              reranking improves first-hit relevance.
            </p>
          </article>
          <article class="card">
            <h4>Safety Gates</h4>
            <p>
              Snapshot fingerprints block incompatible index states with
              deterministic requires_reindex handling.
            </p>
          </article>
        </div>
      </section>

      <section class="section">
        <h3>How Agents Actually Use Satori</h3>
        <p class="section-intro">
          Satori is just an MCP tool. Any MCP-capable agent can call the same
          workflow.
        </p>
        <div class="steps">
          <div class="step">
            <strong>1. Check Readiness</strong>
            <code
              >satori.list_codebases({})
              satori.manage_index({"action":"status","path":"/abs/repo"})</code
            >
            <p>
              Confirm the index exists and is synchronized before starting
              retrieval.
            </p>
          </div>
          <div class="step">
            <strong>2. Run Semantic Queries</strong>
            <code
              >satori.search_codebase({"path":"/abs/repo","query":"auth
              refresh flow","scope":"runtime","resultMode":"grouped","groupBy":"symbol","limit":5})</code
            >
            <p>
              Review grouped results and pass returned <code>callGraphHint</code>
              directly into <code>call_graph</code>.
            </p>
          </div>
          <div class="step">
            <strong>3. Read Exact Spans And Recover Fast</strong>
            <code
              >satori.read_file({"path":"...","start_line":1,"end_line":220})</code
            >
            <p>
              Use <code>mode:"annotated"</code> for content plus outline
              metadata. If a path is missing, run a new semantic query and
              pivot to the current canonical path.
            </p>
          </div>
        </div>
      </section>

      <section class="section">
        <h3>Quickstart (Progressive Disclosure)</h3>
        <p class="section-intro">
          Start with the minimum. Open details only when you need them.
        </p>
        <div class="accordion-list">
          <details>
            <summary>MCP Config (Copy-Paste)</summary>
            <div class="details-body">
              <div class="config-grid">
                <div class="config-card">
                  <div class="config-head">
                    <div class="install-title">Codex TOML</div>
                    <button class="btn copy-btn" data-copy="codex-config">
                      Copy
                    </button>
                  </div>
                  <pre><code id="codex-config">[mcp_servers.satori]
command = "npx"
args = ["-y", "--prefer-offline", "@zokizuan/satori-mcp@3.0.0"]
startup_timeout_ms = 180000
env = { EMBEDDING_PROVIDER = "VoyageAI", EMBEDDING_MODEL = "voyage-4-large", EMBEDDING_OUTPUT_DIMENSION = "1024", VOYAGEAI_API_KEY = "your-api-key", VOYAGEAI_RERANKER_MODEL = "rerank-2.5", MILVUS_ADDRESS = "your-milvus-endpoint", MILVUS_TOKEN = "your-milvus-token" }</code></pre>
                </div>
                <div class="config-card">
                  <div class="config-head">
                    <div class="install-title">OpenCode / Claude</div>
                    <button class="btn copy-btn" data-copy="claude-config">
                      Copy
                    </button>
                  </div>
                  <pre><code id="claude-config">"satori": {
  "type": "local",
  "command": [
    "npx",
    "-y",
    "--prefer-offline",
    "@zokizuan/satori-mcp@3.0.0"
  ],
  "enabled": true,
  "timeout": 30000,
  "environment": {
    "MILVUS_ADDRESS": "your-milvus-endpoint",
    "MILVUS_TOKEN": "your-milvus-token",
    "VOYAGEAI_API_KEY": "your-api-key",
    "EMBEDDING_PROVIDER": "VoyageAI",
    "EMBEDDING_MODEL": "voyage-4-large",
    "EMBEDDING_OUTPUT_DIMENSION": "1024",
    "VOYAGEAI_RERANKER_MODEL": "rerank-2.5"
  }
}</code></pre>
                </div>
              </div>
            </div>
          </details>

          <details>
            <summary>Search Options (Scope, Grouping, Graph Jump)</summary>
            <div class="details-body">
              <pre><code># Runtime-first grouped search (default mode)
satori.search_codebase({"path":"/repo","query":"auth flow","scope":"runtime","resultMode":"grouped","groupBy":"symbol","limit":10})

# Docs-only investigation
satori.search_codebase({"path":"/repo","query":"migration guide","scope":"docs","resultMode":"raw","limit":10})

# File-level grouping + debug traces
satori.search_codebase({"path":"/repo","query":"retry policy","scope":"mixed","resultMode":"grouped","groupBy":"file","limit":12,"debug":true})

# Call graph jump from grouped result hint
satori.call_graph({"path":"/repo","symbolRef":{"file":"src/auth.ts","symbolId":"sym_auth_refresh"},"direction":"both","depth":2,"limit":20})</code></pre>
              <p>
                Grouped mode returns freshness + symbol metadata and a
                discriminated <code>callGraphHint</code> (`supported: true|false`).
              </p>
            </div>
          </details>

          <details>
            <summary>
              Real Agent Trace (Docs Investigation + Missing Path Recovery)
            </summary>
            <div class="details-body">
              <pre><code>Called satori.file_outline({"path":"/home/hamza/repo/tradingview_ratio","file":"src/auth/session.ts","limitSymbols":50})
Called satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/docs/CLI_COMMANDS.md","start_line":1,"end_line":220,"mode":"annotated"})
Result: "QAP CLI Command Reference ..."

Called satori.search_codebase({"path":"/home/hamza/repo/tradingview_ratio","query":"MASTER_AUDIT.md location current path archived","scope":"docs","resultMode":"raw","limit":10})
Hit: docs/research/PHASES_OVERVIEW.md:322-371

Called satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/archive/docs/northstar/core/INVARIANTS.md","start_line":1,"end_line":220,"mode":"annotated"})
Error: File not found

Fallback:
satori.search_codebase({"path":"/home/hamza/repo/tradingview_ratio","query":"northstar/core/INVARIANTS.md docs/INVARIANTS.md reference mismatch","scope":"docs","resultMode":"raw","limit":10})
satori.read_file({"path":"/home/hamza/repo/tradingview_ratio/docs/INVARIANTS.md","start_line":480,"end_line":620,"mode":"annotated"})</code></pre>
            </div>
          </details>
        </div>
      </section>

      <section class="terminal">
        <div class="terminal-head">
          <span>Satori Agent Trace Replay</span>
          <span>SYS.READY</span>
        </div>
        <div class="terminal-body" id="term-body">
          <div class="line">
            ready. click replay to run a realistic transcript.
          </div>
          <div class="line">
            pattern: status check, semantic search, read, fallback, recover.
          </div>
        </div>
        <div class="terminal-actions">
          <button class="btn" id="replay-btn">Replay Trace</button>
          <button class="btn" id="clear-btn">Clear</button>
        </div>
      </section>

      <footer class="footer">
        <span
          >Deep architecture:
          <a href="architecture.html">architecture.html</a> +
          ARCHITECTURE.md.</span
        >
        <span>Keep landing pages short. Keep docs deep.</span>
      </footer>
    </div>

    <script>
      const canvas = document.getElementById("vector-canvas");
      const ctx = canvas.getContext("2d");
      let w = 0;
      let h = 0;
      let particles = [];

      function resizeCanvas() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
      }

      class Particle {
        constructor() {
          this.x = Math.random() * w;
          this.y = Math.random() * h;
          this.vx = (Math.random() - 0.5) * 0.22;
          this.vy = (Math.random() - 0.5) * 0.22;
          this.r = Math.random() * 1.3 + 0.3;
        }

        step() {
          this.x += this.vx;
          this.y += this.vy;
          if (this.x < 0) this.x = w;
          if (this.x > w) this.x = 0;
          if (this.y < 0) this.y = h;
          if (this.y > h) this.y = 0;
        }

        draw() {
          ctx.fillStyle = "rgba(246,246,246,0.55)";
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function initParticles() {
        particles = [];
        for (let i = 0; i < 120; i++) {
          particles.push(new Particle());
        }
      }

      function animate() {
        ctx.clearRect(0, 0, w, h);
        for (let i = 0; i < particles.length; i++) {
          particles[i].step();
          particles[i].draw();
        }
        requestAnimationFrame(animate);
      }

      const isSmallViewport = window.matchMedia("(max-width: 860px)").matches;
      if (!isSmallViewport) {
        resizeCanvas();
        initParticles();
        animate();
        window.addEventListener("resize", () => {
          resizeCanvas();
          initParticles();
        });
      }

      const copyButtons = document.querySelectorAll(".copy-btn");
      copyButtons.forEach((btn) => {
        btn.addEventListener("click", async () => {
          const targetId = btn.getAttribute("data-copy");
          const source = document.getElementById(targetId);
          if (!source) return;
          try {
            await navigator.clipboard.writeText(source.textContent);
            const prev = btn.textContent;
            btn.textContent = "Copied";
            setTimeout(() => {
              btn.textContent = prev;
            }, 1000);
          } catch {
            const prev = btn.textContent;
            btn.textContent = "Copy failed";
            setTimeout(() => {
              btn.textContent = prev;
            }, 1200);
          }
        });
      });

      const termBody = document.getElementById("term-body");
      function addLog(line, active = false) {
        const row = document.createElement("div");
        row.className = `line${active ? " active" : ""}`;
        row.textContent = line;
        termBody.appendChild(row);
        if (termBody.children.length > 14) {
          termBody.removeChild(termBody.firstChild);
        }
      }

      const traceLines = [
        "Called satori.list_codebases({})",
        "Ready: /home/hamza/repo/tradingview_ratio",
        "Called satori.manage_index({action: status, path: /home/hamza/repo/tradingview_ratio})",
        "sync completed | +0 added, -0 removed, ~0 modified",
        "Called satori.search_codebase({query: auth refresh flow, scope: runtime, resultMode: grouped, groupBy: symbol, limit: 5})",
        "Hit: src/auth/session.ts:88-141",
        "Extracted callGraphHint.symbolRef",
        "Called satori.call_graph({direction: both, depth: 2, limit: 20})",
        "Graph: 6 nodes | 8 edges | 1 unresolved note",
        "Called satori.file_outline({path: /repo, file: src/auth/session.ts, limitSymbols: 50})",
        "Called satori.read_file({path: src/auth/session.ts, start_line: 88, end_line: 141, mode: annotated})",
      ];

      const replayBtn = document.getElementById("replay-btn");
      const clearBtn = document.getElementById("clear-btn");
      let traceInterval;

      replayBtn.addEventListener("click", () => {
        clearInterval(traceInterval);
        let i = 0;
        traceInterval = setInterval(() => {
          if (i >= traceLines.length) {
            clearInterval(traceInterval);
            return;
          }
          const active =
            traceLines[i].startsWith("Hit:") ||
            traceLines[i].startsWith("Error:");
          addLog(traceLines[i], active);
          i++;
        }, 170);
      });

      clearBtn.addEventListener("click", () => {
        clearInterval(traceInterval);
        termBody.innerHTML = "";
        addLog("ready. click replay to run a realistic transcript.");
        addLog(
          "pattern: status check, semantic search, read, fallback, recover.",
        );
      });
    </script>
  </body>
</html>
